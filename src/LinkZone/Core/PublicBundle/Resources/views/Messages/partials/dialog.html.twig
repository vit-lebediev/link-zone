{% trans_default_domain "LZCorePublicBundle" %}

<h1 class="center">{{ "messages.dialog_with_webmaster"|trans }} {% verbatim %}<a href="{{ dialog.companionPlatform.url }}">{{ dialog.companionPlatform.url }}</a>{% endverbatim %}</h1>

<div id="dialogues-wrapper">
    <div>
        <form ng-submit="sendMessage()">
            <div class="center">
                <fieldset>
                    <div class="form-group">
                        <textarea ng-model="message" ui-keypress="{'ctrl-enter':'sendMessageOnEnterPress($event)'}"></textarea>
                    </div>
                </fieldset>
                <div><small>{{ "messages.labels.send_message_help"|trans }}</small></div>
                <button type="submit" class="btn btn-primary">{{ "common.send"|trans }}</button>
            </div>
        </form>
    </div>
    <div ng-repeat="message in dialog.messages | reverse" class="message-box round-border">
        <div class="sender"><span>
            <span ng-show="message.isIncoming">{{ "common.webmaster"|trans }} {% verbatim %}<a href="{{ dialog.companionPlatform.url }}">{{ dialog.companionPlatform.url }}</a>{% endverbatim %}:</span>
            <span ng-show="message.isNotIncoming">{{ "common.you"|trans }}:</span>
        </span></div>
        <div class="message"><span class="message">{% verbatim %}{{ message.message }}{% endverbatim %}</span></div>
    </div>
    <div class="center">
        <button type="submit" ng-click="loadMessages()" class="btn btn-primary">{{ "messages.load_more_messages"|trans({"%messageNum%": messages_to_load}) }}</button>
    </div>
</div>
